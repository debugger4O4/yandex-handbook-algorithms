### Задача «Сувениры».

![img.png](content%2Fimg.png)

Три пирата делят свою добычу, в которую входят `n` предметов разной ценности.

- Входные данные: Первая строка содержит целое число `n`. Вторая строка содержит целые числа `v1, v2, ..., vn`, разделённые
пробелами.
- Выходные данные: Вывести `1`, если `v1, v2, ..., vn` можно разделить на три поднабора с одинаковыми суммами; в противном 
случае — вывести `0`.
- Ограничения: `1 ≤ n ≤ 20, 1 ≤ vi ≤ 30` для всех `i`.

![img_1.png](content%2Fimg_1.png)

- `1 + 3 + 7 + 25 = 2 + 4 + 5 + 7 + 8 + 10 = 5 + 12 + 19`.

Рассмотрим решение задачи. Обозначим `v1 + v2 + ... + vi` как `sum(i)`. Разделить набор из `n` предметов на три части возможно,
только если их общая ценность делится на три. То есть `sum(n) = 3V`, где `V` — это целое число. Так, нам необходимо разделить
`n` чисел на три части, где сумма чисел в каждой части равна `V`. Одна из этих частей содержит `n`-й трофей (с ценностью
`vn`). Если мы его уберём, то получим разделение первых `n − 1` трофеев на три части таким образом, что ценность двух из
них будет равна `V`, а сумма оставшейся части — `V − vn`.

Вместо разделения всех `n` предметов, попробуем решить более мелкую задачу, состоящую в делении первых `i` предметов на 
части с ценностью `s1, s2` и `sum(i)` - `s1` - `s2`. Если такое разделение возможно, мы присваиваем `split(i, s1, s2) = true`
(в противном случае — `false`) и отмечаем, что пираты могут разделить добычу честно, только если `split(n, V, V) = true`.

Предположим, что `split(i, s1, s2) = true`. Тогда первые `i` чисел можно разделить на три части таким образом, чтобы сумма
чисел в первой части составляла `s1`, а сумма чисел во второй части — `s2`.

- `i`-й предмет принадлежит первой части. Тогда `vi ≤ s1`. Убрав его из первой части, мы разделим первые `i − 1` чисел на
три части так, что сумма первых двух частей составит `s1 - vi` и `s2`, то есть `split(i − 1, s1 - vi, s2) = true`.
- `i`-й предмет принадлежит второй части. Как и в предыдущем случае, `vi ≤ s1` и `split(i − 1, s1, s2 - vi) = true`.
- i-й предмет принадлежит третьей части. Тогда `split(i − 1, s1, s2) = true`.

Так, значение `split(i, s1, s2)` можно вычислить, посмотрев на
![img_2.png](content%2Fimg_2.png)

Базовый случай для этого рекуррентного соотношения: `split(0, 0, 0) = true` и `split(0, s1, s2) = false`, если `s1 + s2 > 0`.

```
Split(v[1],…,v[n]):
    if v[1] + … + v[n] не делится целочисленно на 3:
        return false
    V = (v[1] + … + v[n]) / 3
    split = ... // массив размера (n+1) × (V+1) × (V+1)
    // заполнить массив split значениями false
    split[0][0][0] = true
    for i from 1 to n:
        for s1 from 0 to V:
            for s2 from 0 to V:
                split[i][s1][s2] = split[i−1][s1][s2]
                if s1 >= v[i]:
                    split[i][s1][s2] = split[i][s1][s2] OR split[i - 1][s1 - v[i]][s2]
                if s2 >= v[i]:
                    split[i][s1][s2] = split[i][s1][s2] OR split[i - 1][s1][s2 - v[i]]
    return split[n][V][V]
```

Время выполнения составляет `O(nV^2)`.